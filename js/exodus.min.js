var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,d,c){if(b){d=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var g=a[c];g in d||(d[g]={});d=d[g]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(b,a){return b===a?0!==b||1/b===1/a:b!==b&&a!==a}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(b,a){var c=this;c instanceof String&&(c=String(c));var d=c.length;for(a=a||0;a<d;a++)if(c[a]==b||Object.is(c[a],b))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,d){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,d||0)}},"es6","es3");
$jscomp.polyfill("Math.trunc",function(a){return a?a:function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var b=Math.floor(Math.abs(a));return 0>a?-b:b}},"es6","es3");var AFFLICTIONS="Burned;Frozen;Paralysis;Poisoned;Bad Sleep;Confused;Cursed;Disabled;Rage;Flinch;Infatuation;Sleep;Suppressed;Temporary Hit Points;Fainted;Blindness;Total Blindness;Slowed;Stuck;Trapped;Tripped;Vulnerable".split(";"),TypeEffectivity={},Natures={},Species={};$(function(){ko.applyBindings(ExodusMVVM)});
ko.extenders.numeric=function(a,b){var d=ko.pureComputed({read:a,write:function(c){var d=a(),e=Math.pow(10,b),f=isNaN(c)?0:+c;e=Math.round(f*e)/e;e!==d?a(e):c!==d&&a.notifySubscribers(e)}}).extend({notify:"always"});d(a());return d};function onBattleFormLoad(){$("#battle-char-afflict-name").autocomplete({minLength:0,source:AFFLICTIONS}).focus(function(){var a=$(this).val();$(this).autocomplete("search",a)})}function onClickAddNewCharacter(){ExodusMVVM.initiative.push(newChar)}
function onClickDamage(){var a=ExodusMVVM.getCurrentChar(),b=$("#battle-char-deal-amt").val(),d=$("#battle-char-deal-act").val(),c=$("#battle-char-deal-type").val();doDamage(a,b,d,c)}function onClickAddAffliction(){var a=$("#battle-char-afflict-name"),b=a.val();AFFLICTIONS.includes(b)?0<=ExodusMVVM.getCurrentChar().afflictions.indexOf(b)||(ExodusMVVM.getCurrentChar().afflictions.push(b),a.val("")):displayMessage("Invalid affliction. Please select a value from the dropdown.","warning")}
function onClickRemoveAffliction(a){ExodusMVVM.getCurrentChar().afflictions.remove(a)}function displayMessage(a,b){}function doDamage(a,b,d,c){var g=a.health(),e=0,f=1;"Typeless"!==c&&""!==a.type1()&&(f=getTypeEffectivity(c,a.type1()),""!==a.type2()&&(f*=getTypeEffectivity(c,a.type2())));"True"!==d&&(e="Physical"===d?a.def.final():a.sdef.final());b=b*f-e;0>=b&&(b=1);0===f&&(b=0);a.health(g-b)}function getTypeEffectivity(a,b){return TypeEffectivity[a.toLowerCase()][b.toLowerCase()]}
function loadPokedexDataForCharacter(a){$.getJSON("http://ptu.will-step.com/api/v1/pokemon/"+a.pokedex,function(b){a.pokedexData=b})}$.getJSON("http://ptu.will-step.com/api/v1/moves/?names=[%22Ember%22,%22Struggle%22,%22Reflect%22]",function(a){createNewMovesFromAPIReturn(ExodusMVVM.initiative()[0],a)});
$.getJSON("http://ptu.will-step.com/api/v1/moves/?names=[%22Confide%22,%22Bullet%20Seed%22,%22Facade%22,%22Sleep%20Powder%22,%22Take%20Down%22,%22Poison%20Powder%22]",function(a){createNewMovesFromAPIReturn(ExodusMVVM.initiative()[1],a)});var ExodusMVVM={TYPE_LIST:ko.observableArray([""]),ATK_TYPE_LIST:ko.observableArray(["Typeless"]),NATURE_LIST:ko.observableArray([""]),initiative:ko.observableArray([{name:ko.observable("Character Name"),image:"/img/pokemon-profiles/133.png",species:"133 - Eevee",pokedex:"133",health:ko.observable(29).extend({numeric:0}),injuries:ko.observable(0).extend({numeric:0}),maxHealth:0,injuredHealth:0,maxHealthDisplay:0,tick:0,afflictions:ko.observableArray(["Poisoned"]),level:ko.observable(12).extend({numeric:0}),
type1:ko.observable("Normal"),type2:ko.observable(""),nature:"Hardy",gender:"Male",hp:{base:ko.observable(6).extend({numeric:0}),lvlup:ko.observable(2).extend({numeric:0}),total:0},atk:{base:ko.observable(6).extend({numeric:0}),lvlup:ko.observable(2).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),final:0},def:{base:ko.observable(5).extend({numeric:0}),lvlup:ko.observable(2).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),final:0},satk:{base:ko.observable(5).extend({numeric:0}),
lvlup:ko.observable(2).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),final:0},sdef:{base:ko.observable(7).extend({numeric:0}),lvlup:ko.observable(2).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),final:0},spd:{base:ko.observable(6).extend({numeric:0}),lvlup:ko.observable(2).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),final:0},capabilities:{},moves:ko.observableArray([]),abilities:ko.observableArray([])},{name:ko.observable("Character Two"),
image:"/img/pokemon-profiles/001.png",species:"001 - Bulbasaur",pokedex:"001",health:ko.observable(29).extend({numeric:0}),injuries:ko.observable(0).extend({numeric:0}),maxHealth:0,injuredHealth:0,maxHealthDisplay:0,tick:0,afflictions:ko.observableArray([]),level:ko.observable(12).extend({numeric:0}),type1:ko.observable("Grass"),type2:ko.observable(""),nature:"Cuddly",gender:"Female",hp:{base:ko.observable(6).extend({numeric:0}),lvlup:ko.observable(2).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),
final:0},atk:{base:ko.observable(6).extend({numeric:0}),lvlup:ko.observable(2).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),final:0},def:{base:ko.observable(5).extend({numeric:0}),lvlup:ko.observable(2).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),final:0},satk:{base:ko.observable(5).extend({numeric:0}),lvlup:ko.observable(2).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),final:0},sdef:{base:ko.observable(7).extend({numeric:0}),lvlup:ko.observable(2).extend({numeric:0}),
total:0,cs:ko.observable(0).extend({numeric:0}),final:0},spd:{base:ko.observable(6).extend({numeric:0}),lvlup:ko.observable(2).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),final:0},capabilities:{},moves:ko.observableArray([]),abilities:ko.observableArray([])}]),currentChar:ko.observable(0),currentMove:ko.observable(0),onClickSelectChar:function(a){ExodusMVVM.currentChar(ExodusMVVM.initiative.indexOf(a))},onClickSelectMove:function(a){ExodusMVVM.currentMove(ExodusMVVM.getCurrentChar().moves().indexOf(a));
$("#moveModal").modal("show")},createNewCharacter:function(){var a={name:ko.observable("New Character"),image:"",species:ko.observable(""),pokedex:ko.observable(""),health:ko.observable(1).extend({numeric:0}),injuries:ko.observable(0).extend({numeric:0}),maxHealth:0,injuredHealth:0,maxHealthDisplay:0,tick:0,afflictions:ko.observableArray([]),level:ko.observable(1).extend({numeric:0}),type1:ko.observable(""),type2:ko.observable(""),nature:ko.observable(""),gender:ko.observable(""),hp:{base:ko.observable(10).extend({numeric:0}),
lvlup:ko.observable(0).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),final:0},atk:{base:ko.observable(5).extend({numeric:0}),lvlup:ko.observable(0).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),final:0},def:{base:ko.observable(5).extend({numeric:0}),lvlup:ko.observable(0).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),final:0},satk:{base:ko.observable(5).extend({numeric:0}),lvlup:ko.observable(0).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),
final:0},sdef:{base:ko.observable(5).extend({numeric:0}),lvlup:ko.observable(0).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),final:0},spd:{base:ko.observable(5).extend({numeric:0}),lvlup:ko.observable(0).extend({numeric:0}),total:0,cs:ko.observable(0).extend({numeric:0}),final:0},capabilities:{},moves:ko.observableArray([]),abilities:ko.observableArray([])};createCharComputed(0,a);return a},onClickRemoveAffliction:onClickRemoveAffliction};
function loadComputed(){ExodusMVVM.getCurrentChar=ko.computed(function(){return ExodusMVVM.initiative()[ExodusMVVM.currentChar()]},ExodusMVVM);ExodusMVVM.getCurrentMove=ko.computed(function(){return ExodusMVVM.initiative()[ExodusMVVM.currentChar()].moves()[ExodusMVVM.currentMove()]},ExodusMVVM);$.each(ExodusMVVM.initiative(),createCharComputed)}
function createCharComputed(a,b){b.maxHealth=ko.pureComputed(function(){return this.level()+3*this.hp.total()+10},b);b.injuredHealth=ko.pureComputed(function(){return Math.trunc(this.maxHealth()*(1-this.injuries()/10))},b);b.maxHealthDisplay=ko.pureComputed(function(){return this.injuredHealth()+"/"+this.maxHealth()},b);b.tick=ko.pureComputed(function(){return Math.trunc(this.maxHealth()/10)},b);b.hp.total=ko.pureComputed(function(){return this.base()+this.lvlup()},b.hp);b.atk.total=ko.pureComputed(function(){return this.base()+
this.lvlup()},b.atk);b.def.total=ko.pureComputed(function(){return this.base()+this.lvlup()},b.def);b.satk.total=ko.pureComputed(function(){return this.base()+this.lvlup()},b.satk);b.sdef.total=ko.pureComputed(function(){return this.base()+this.lvlup()},b.sdef);b.spd.total=ko.pureComputed(function(){return this.base()+this.lvlup()},b.spd);b.atk.final=ko.pureComputed(function(){return Math.ceil(this.total()*this.cs()*.1+this.total())},b.atk);b.def.final=ko.pureComputed(function(){return Math.ceil(this.total()*
this.cs()*.1+this.total())},b.def);b.satk.final=ko.pureComputed(function(){return Math.ceil(this.total()*this.cs()*.1+this.total())},b.satk);b.sdef.final=ko.pureComputed(function(){return Math.ceil(this.total()*this.cs()*.1+this.total())},b.sdef);b.spd.final=ko.pureComputed(function(){return Math.ceil(this.total()*this.cs()*.1+this.total())},b.spd)}
function createNewMovesFromAPIReturn(a,b){$.each(b,function(b,c){c.Name=b;c.Class=ko.observable(c.Class);c.Type=ko.observable(c.Type);c.Effect||(c.Effect="");a.moves.push(c)})}$.getJSON("http://ptu.will-step.com/api/v1/types",function(a){$.each(a,function(a,d){ExodusMVVM.TYPE_LIST.push(a.charAt(0).toUpperCase()+a.slice(1));ExodusMVVM.ATK_TYPE_LIST.push(a.charAt(0).toUpperCase()+a.slice(1))});TypeEffectivity=a});
$.getJSON("http://ptu.will-step.com/api/v1/natures",function(a){$.each(a,function(a,d){ExodusMVVM.NATURE_LIST.push(a)});Natures=a});$.getJSON("http://ptu.will-step.com/api/v1/pokemon/list",function(a){Species=a});loadComputed();
